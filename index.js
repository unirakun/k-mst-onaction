!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash"),require("mobx-state-tree")):"function"==typeof define&&define.amd?define(["exports","lodash","mobx-state-tree"],e):e(t["trampss-mst-onaction"]={},t.lodash,t.mobxStateTree)}(this,function(t,e,n){"use strict";var r=function(t,n){return function(r,o){return!!(e.isString(t)&&t===r.fullpath||e.isFunction(t)&&t(r,o)||e.isRegExp(t)&&r.fullpath.match(t))&&n(r,o)}};r.ended=function(t,e){return function(n,o){return!!n.ended&&r(t,e)(n,o)}};var o=function(t,e,n){t.forEach(function(t){return t(e,n)})},u=function(t,n,r){var o=t(n,r);o&&e.isArray(o)&&o.forEach(function(t){return t(n,r)})},i=(function(){function t(t){this.value=t}function e(e){function n(o,u){try{var i=e[o](u),a=i.value;a instanceof t?Promise.resolve(a.value).then(function(t){n("next",t)},function(t){n("throw",t)}):r(i.done?"return":"normal",i.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":o.resolve({value:e,done:!0});break;case"throw":o.reject(e);break;default:o.resolve({value:e,done:!1})}(o=o.next)?n(o.key,o.arg):u=null}var o,u;this._invoke=function(t,e){return new Promise(function(r,i){var a={key:t,arg:e,resolve:r,reject:i,next:null};u?u=u.next=a:(o=u=a,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),a=function(t){var e=t.name,r=t.type,o=t.context,u=t.args,a=n.getPath(o),c={fullpath:a+"/"+e,path:a,name:e,args:u};switch(r){case"process_return":case"flow_return":return i({},c,{ended:!0});case"action":return c;default:return}},c=function(t){return function(n,r){if(e.isFunction(t))return u(t,n,r);if(e.isArray(t))return o(t,n,r);throw new Error("[trampss-mst-onaction] unknow dispatch type")}};t.default=function(t){var e=c(t);return function(t,n){var r=a(t);return r&&e(r,t.tree),n(t)}},t.take=r,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
